## 기존 코드 분석

-   관련 파일:
    -   `src/App.tsx` - 메인 애플리케이션 컴포넌트, 폼 및 일정 렌더링
    -   `src/hooks/useEventForm.ts` - 이벤트 폼 상태 관리 및 유효성 검사
    -   `src/hooks/useEventOperations.ts` - 이벤트 데이터 CRUD (API 호출)
    -   `src/types.ts` - 이벤트 및 반복 관련 타입 정의
    -   `src/utils/dateUtils.ts` - 날짜 관련 유틸리티 함수
    -   `src/utils/eventOverlap.ts` - 일정 겹침 검사 로직

-   수정 대상:
    -   파일: `src/App.tsx`
    -   유형: COMPONENT, FUNCTION
    -   이름: 반복 일정 UI 블록, `addOrUpdateEvent` 함수, `repeatEndDate` TextField
    -   현재 동작:
        -   반복 일정 UI 블록이 주석 처리되어 있습니다.
        -   `addOrUpdateEvent`는 단일 `eventData`를 생성하고 겹침 검사 후 `saveEvent`를 호출합니다.
        -   `repeatEndDate` TextField에 최대 날짜 제한이 없습니다.
    -   변경 필요:
        -   주석 처리된 반복 일정 UI를 활성화합니다.
        -   `repeatEndDate` TextField에 2025-12-31까지의 최대 날짜 제한을 추가합니다.
        -   `addOrUpdateEvent`에서 반복 일정인 경우 겹침 검사를 건너뛰고, 여러 이벤트를 생성하여 저장하도록 로직을 변경합니다.
    -   상수만?: 아니요. UI 활성화 및 핵심 비즈니스 로직 변경이 필요합니다.
    -   영향 범위: 폼 제출 로직, `useEventForm` 훅, `useEventOperations` 훅, 신규 유틸리티 함수

    -   파일: `src/hooks/useEventForm.ts`
    -   유형: FUNCTION
    -   이름: `useEventForm` 훅의 반환 객체
    -   현재 동작: `setRepeatType`, `setRepeatInterval`, `setRepeatEndDate` 함수들이 반환 객체에 포함되어 있지 않아 `App.tsx`에서 직접 사용할 수 없습니다.
    -   변경 필요: `setRepeatType`, `setRepeatInterval`, `setRepeatEndDate` 함수들을 반환 객체에 추가합니다.
    -   상수만?: 아니요. 훅의 반환 값이 변경됩니다.
    -   영향 범위: `src/App.tsx`

    -   파일: `src/hooks/useEventOperations.ts`
    -   유형: FUNCTION
    -   이름: `saveMultipleEvents` (신규 함수)
    -   현재 동작: `saveEvent`는 단일 이벤트를 저장하고 성공 시 스낵바 알림을 띄웁니다.
    -   변경 필요: 여러 반복 일정을 한 번에 저장하고, 모든 저장이 완료된 후 스낵바 알림을 한 번만 표시하는 `saveMultipleEvents` 함수를 새로 추가합니다.
    -   상수만?: 아니요. 새로운 함수가 추가되고, 스낵바 알림 로직이 변경됩니다.
    -   영향 범위: `src/App.tsx` (반복 일정 저장 시)

    -   파일: `src/utils/recurrenceUtils.ts` (신규 파일)
    -   유형: NEW FILE, FUNCTION
    -   이름: `generateRecurringEvents`
    -   현재 동작: 없음 (새로운 파일)
    -   변경 필요: 반복 유형, 간격, 시작일, 종료일을 기반으로 여러 이벤트 객체를 생성하는 함수를 구현합니다. 31일, 윤년 29일과 같은 특수 케이스를 처리합니다.
    -   상수만?: 아니요. 완전히 새로운 로직을 포함하는 새 함수입니다.
    -   영향 범위: `src/App.tsx`

## 기능 목록

| ID   | 이름                       | 타입                      | 파일                                     | 복잡도   | 수락 기준                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ```
```mermaid
graph TD
    A[App.tsx] --- B[useEventForm.ts]
    A[App.tsx] --- C[useEventOperations.ts]
    A[App.tsx] --- D[types.ts]
    A[App.tsx] --- E[dateUtils.ts]
    A[App.tsx] --- F[eventOverlap.ts]
    C[useEventOperations.ts] --- D[types.ts]
    F[eventOverlap.ts] --- D[types.ts]
    F[eventOverlap.ts] --- E[dateUtils.ts]
    B[useEventForm.ts] --- D[types.ts]
    B[useEventForm.ts] --- G[timeValidation.ts]
    H[recurrenceUtils.ts (신규)] --- D[types.ts]
    H[recurrenceUtils.ts (신규)] --- E[dateUtils.ts]
    A[App.tsx] --- H[recurrenceUtils.ts (신규)]
```

## 추천 구현 순서

1.  핵심: `src/types.ts` 파일의 `RepeatType`, `RepeatInfo`, `EventForm`, `Event` 타입 정의는 현재 요구사항을 만족하므로 변경이 필요 없습니다.

2.  **F002: 반복 폼 상태 및 편집 로직 활성화**
    -   파일: `src/hooks/useEventForm.ts`
    -   수정 대상 유형: FUNCTION
    -   수정 대상 이름: `useEventForm` 훅의 반환 객체
    -   변경 내용: `setRepeatType`, `setRepeatInterval`, `setRepeatEndDate`를 `return` 객체에 추가합니다.
    -   예시:
        ```typescript
        // src/hooks/useEventForm.ts
        return {
          // ...기존 반환 값
          repeatType,
          setRepeatType, // 이 부분 추가
          repeatInterval,
          setRepeatInterval, // 이 부분 추가
          repeatEndDate,
          setRepeatEndDate, // 이 부분 추가
          // ...
        };
        ```

3.  **F001: 반복 일정 UI 활성화 및 F005: 반복 종료일 최대값 제한 (2025-12-31)**
    -   파일: `src/App.tsx`
    -   수정 대상 유형: COMPONENT
    -   수정 대상 이름: 주석 처리된 반복 일정 UI 블록, `repeatEndDate` TextField
    -   변경 내용:
        -   `App.tsx`에서 주석 처리된 반복 일정 UI 블록 (`{/* {isRepeating && (...) } */}`)을 해제합니다.
        -   `repeatEndDate` TextField에 `inputProps={{ max: '2025-12-31' }}` 속성을 추가하여 최대 종료일을 제한합니다.
    -   예시:
        ```typescript
        // src/App.tsx
        // ...
        {isRepeating && ( // 주석 해제
          <Stack spacing={2}>
            <FormControl fullWidth>
              <FormLabel>반복 유형</FormLabel>
              <Select
                size="small"
                value={repeatType}
                onChange={(e) => setRepeatType(e.target.value as RepeatType)}
              >
                <MenuItem value="daily">매일</MenuItem>
                <MenuItem value="weekly">매주</MenuItem>
                <MenuItem value="monthly">매월</MenuItem>
                <MenuItem value="yearly">매년</MenuItem>
              </Select>
            </FormControl>
            <Stack direction="row" spacing={2}>
              <FormControl fullWidth>
                <FormLabel>반복 간격</FormLabel>
                <TextField
                  size="small"
                  type="number"
                  value={repeatInterval}
                  onChange={(e) => setRepeatInterval(Number(e.target.value))}
                  slotProps={{ htmlInput: { min: 1 } }}
                />
              </FormControl>
              <FormControl fullWidth>
                <FormLabel>반복 종료일</FormLabel>
                <TextField
                  size="small"
                  type="date"
                  value={repeatEndDate}
                  onChange={(e) => setRepeatEndDate(e.target.value)}
                  inputProps={{ max: '2025-12-31' }} // 이 부분 추가
                />
              </FormControl>
            </Stack>
          </Stack>
        )}
        // ...
        ```

4.  **F003: 반복 이벤트 생성 유틸리티 구현**
    -   파일: `src/utils/recurrenceUtils.ts` (신규 파일 생성)
    -   수정 대상 유형: NEW FILE, FUNCTION
    -   수정 대상 이름: `generateRecurringEvents`
    -   변경 내용: `EventForm`과 `RepeatInfo`를 받아 반복 규칙에 따라 여러 `EventForm` 객체 배열을 반환하는 함수를 구현합니다. `dateUtils.ts`의 `getDaysInMonth`, `formatDate` 등을 활용하여 특수 케이스 (31일, 윤년 29일)를 처리합니다.
    -   예시 (개념):
        ```typescript
        // src/utils/recurrenceUtils.ts
        import { EventForm, RepeatInfo } from '../types';
        import { getDaysInMonth, formatDate } from './dateUtils';

        export function generateRecurringEvents(
          initialEvent: EventForm,
          repeatInfo: RepeatInfo
        ): EventForm[] {
          const events: EventForm[] = [];
          let currentDate = new Date(initialEvent.date);
          const endDate = repeatInfo.endDate ? new Date(repeatInfo.endDate) : new Date('2025-12-31'); // 기본값 2025-12-31

          // 중요: endDate가 2025-12-31을 초과하지 않도록 보장
          if (endDate.getTime() > new Date('2025-12-31').getTime()) {
              endDate.setFullYear(2025);
              endDate.setMonth(11); // 0-indexed month for December
              endDate.setDate(31);
          }

          while (currentDate.getTime() <= endDate.getTime()) {
            const currentEventDate = formatDate(currentDate);

            // 특수 케이스 처리: 31일, 윤년 29일
            let shouldAddEvent = true;
            if (repeatInfo.type === 'monthly' && initialEvent.date.endsWith('-31')) {
                const dayOfMonth = currentDate.getDate();
                const daysInCurrentMonth = getDaysInMonth(currentDate.getFullYear(), currentDate.getMonth() + 1);
                if (dayOfMonth < 31 && dayOfMonth !== daysInCurrentMonth) {
                    shouldAddEvent = false;
                }
            } else if (repeatInfo.type === 'yearly' && initialEvent.date.endsWith('-02-29')) {
                const year = currentDate.getFullYear();
                const isLeapYear = (year % 4 === 0 && year % 100 !== 0) || (year % 400 === 0);
                if (!isLeapYear && currentDate.getMonth() === 1 && currentDate.getDate() === 28) {
                    // 윤년이 아닐 때 2월 29일 대신 2월 28일로 생성되는 것을 방지
                    shouldAddEvent = false;
                }
            }

            if (shouldAddEvent) {
                events.push({
                    ...initialEvent,
                    date: currentEventDate,
                    repeat: { ...repeatInfo }, // 반복 정보 포함
                });
            }

            // 다음 반복 날짜 계산
            if (repeatInfo.type === 'daily') {
              currentDate.setDate(currentDate.getDate() + repeatInfo.interval);
            } else if (repeatInfo.type === 'weekly') {
              currentDate.setDate(currentDate.getDate() + repeatInfo.interval * 7);
            } else if (repeatInfo.type === 'monthly') {
              const initialDay = new Date(initialEvent.date).getDate();
              currentDate.setMonth(currentDate.getMonth() + repeatInfo.interval);
              // 중요: 날짜가 월의 마지막 날을 초과하는 경우 조정
              const daysInNewMonth = getDaysInMonth(currentDate.getFullYear(), currentDate.getMonth() + 1);
              currentDate.setDate(Math.min(initialDay, daysInNewMonth));
            } else if (repeatInfo.type === 'yearly') {
              const initialDay = new Date(initialEvent.date).getDate();
              const initialMonth = new Date(initialEvent.date).getMonth();
              currentDate.setFullYear(currentDate.getFullYear() + repeatInfo.interval);
              // 중요: 윤년 2월 29일 처리
              const daysInNewMonth = getDaysInMonth(currentDate.getFullYear(), initialMonth + 1);
              currentDate.setMonth(initialMonth);
              currentDate.setDate(Math.min(initialDay, daysInNewMonth));
            } else {
                break; // 'none' 타입이거나 알 수 없는 타입
            }
          }
          return events;
        }
        ```

5.  **F004: 반복 일정 저장 로직 구현**
    -   파일: `src/hooks/useEventOperations.ts`
    -   수정 대상 유형: FUNCTION (신규)
    -   수정 대상 이름: `saveMultipleEvents`
    -   변경 내용: `eventsToSave` 배열을 인자로 받아, 각 이벤트를 API로 저장하고 마지막에 한 번만 스낵바 알림을 표시하는 함수를 구현합니다.
    -   예시:
        ```typescript
        // src/hooks/useEventOperations.ts
        // ...
        export const useEventOperations = (editing: boolean, onSave?: () => void) => {
          // ... (기존 코드)

          const saveMultipleEvents = async (eventsToSave: EventForm[]) => {
            try {
              for (const eventData of eventsToSave) {
                const response = await fetch('/api/events', {
                  method: 'POST',
                  headers: { 'Content-Type': 'application/json' },
                  body: JSON.stringify(eventData),
                });

                if (!response.ok) {
                  throw new Error(`Failed to save event: ${eventData.title}`);
                }
              }

              await fetchEvents(); // 모든 이벤트 저장 후 한 번만 데이터 다시 불러오기
              onSave?.();
              enqueueSnackbar('반복 일정이 모두 추가되었습니다.', { variant: 'success' }); // 한 번만 알림
            } catch (error) {
              console.error('Error saving multiple events:', error);
              enqueueSnackbar('반복 일정 저장 실패', { variant: 'error' });
            }
          };

          // ... (기존 return 객체)
          return { events, fetchEvents, saveEvent, deleteEvent, saveMultipleEvents }; // saveMultipleEvents 추가
        };
        ```

    -   파일: `src/App.tsx`
    -   수정 대상 유형: FUNCTION
    -   수정 대상 이름: `addOrUpdateEvent` 함수
    -   변경 내용:
        -   `useEventOperations` 훅에서 `saveMultipleEvents`를 가져옵니다.
        -   `addOrUpdateEvent` 로직 내에서 `isRepeating` 값에 따라 분기 처리합니다.
            -   `isRepeating`이 `true`인 경우: `findOverlappingEvents` 호출을 건너뛰고, `generateRecurringEvents`를 호출하여 이벤트 목록을 생성한 후, `saveMultipleEvents`를 호출합니다.
            -   `isRepeating`이 `false`인 경우: 기존 `findOverlappingEvents` 및 `saveEvent` 호출 로직을 유지합니다.
    -   예시:
        ```typescript
        // src/App.tsx
        // ...
        import { generateRecurringEvents } from './utils/recurrenceUtils.ts'; // 이 부분 추가

        function App() {
          // ...
          const { events, saveEvent, deleteEvent, saveMultipleEvents } = useEventOperations(Boolean(editingEvent), () =>
            setEditingEvent(null)
          );
          // ...

          const addOrUpdateEvent = async () => {
            if (!title || !date || !startTime || !endTime) {
              enqueueSnackbar('필수 정보를 모두 입력해주세요.', { variant: 'error' });
              return;
            }

            if (startTimeError || endTimeError) {
              enqueueSnackbar('시간 설정을 확인해주세요.', { variant: 'error' });
              return;
            }

            const baseEventData: EventForm = { // baseEventData로 이름 변경
              title,
              date,
              startTime,
              endTime,
              description,
              location,
              category,
              repeat: {
                type: isRepeating ? repeatType : 'none',
                interval: repeatInterval,
                endDate: repeatEndDate || undefined,
              },
              notificationTime,
            };

            if (isRepeating) {
              // 중요: 반복 일정은 겹침 검사를 건너뜁니다. (요구사항 5)
              const recurringEvents = generateRecurringEvents(baseEventData, baseEventData.repeat);
              await saveMultipleEvents(recurringEvents); // 여러 이벤트 저장 함수 호출 (요구사항 6)
              resetForm();
            } else {
              const eventData: Event | EventForm = {
                id: editingEvent ? editingEvent.id : undefined,
                ...baseEventData,
              };

              const overlapping = findOverlappingEvents(eventData, events);
              if (overlapping.length > 0) {
                setOverlappingEvents(overlapping);
                setIsOverlapDialogOpen(true);
              } else {
                await saveEvent(eventData);
                resetForm();
              }
            }
          };
          // ...
          // Dialog의 "계속 진행" 버튼 로직도 isRepeating 분기 처리 필요
          // ...
        }
        ```